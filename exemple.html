<!DOCTYPE html>
<html>
  <head>
    <title>Sending informations</title>
    <link rel="stylesheet" type="text/css" href="mystyle.css">
  </head>
  <body>
  	<h1>Choose what you want to send</h1>

  <script type="text/javascript">
  	var jsonStruc = {
  "@context": [
    "https://www.w3.org/2018/credentials/v1",
    "https://www.w3.org/2018/credentials/examples/v1"
  ],
  "id": "http://example.gov/credentials/3732",
  "type": ["VerifiableCredential", "proof of residence"],
  "issuer": "https://mairie-toulouse.edu",
  "issuanceDate": "2010-01-01T19:73:24Z",
  "credentialSubject": {
    "id": "did:example:ebfeb1f712ebc6f1c276e12ec21",
    "degree": {
      "type": "BachelorDegree",
      "name": "<span lang='fr-CA'>Baccalauréat en musiques numériques</span>"
    }
  },
  "proof": {
    "type": "RsaSignature2018",
    "created": "2018-06-18T21:19:10Z",
    "verificationMethod": "https://example.com/jdoe/keys/1",
    "signatureValue": "BavEll0/I1zpYw8XNi1bgVg/sCneO4Jugez8RwDg/+MCRVpjOboDoe4SxxKjkCOvKiCHGDvc4krqi6Z1n0UfqzxGfmatCuFibcC1wpsPRdW+gGsutPTLzvueMWmFhwYmfIFpbBu95t501+rSLHIEuujM/+PXr9Cky6Ed+W3JT24="
  }
}

var jsonStruc2 = {
  "@context": [
    "https://www.w3.org/2018/credentials/v1",
    "https://www.w3.org/2018/credentials/examples/v1"
  ],
  "id": "http://example.gov/credentials/3732",
  "type": ["VerifiableCredential", "proof of identity"],
  "issuer": "https://google.fr",
  "issuanceDate": "2010-01-01T19:73:24Z",
  "credentialSubject": {
    "id": "did:example:ebfeb1f712ebc6f1c276e12ec21",
    "degree": {
      "type": "Other",
      "name": "<span lang='fr-CA'>Baccalauréat en musiques numériques</span>"
    }
  },
  "proof": {
    "type": "RsaSignature2018",
    "created": "2018-06-18T21:19:10Z",
    "verificationMethod": "https://example.com/jdoe/keys/1",
    "signatureValue": "BavEll0/I1zpYw8XNi1bgVg/sCneO4Jugez8RwDg/+MCRVpjOboDoe4SxxKjkCOvKiCHGDvc4krqi6Z1n0UfqzxGfmatCuFibcC1wpsPRdW+gGsutPTLzvueMWmFhwYmfIFpbBu95t501+rSLHIEuujM/+PXr9Cky6Ed+W3JT24="
  }
}
	  //var vcDispo = browser.storage.local.get(storageToSend);
    var tab = [jsonStruc, jsonStruc2];
    for (var i = 0; i < tab.length; i++) {
        document.write("<div> <input class='vcAvailable' type='checkbox' id='" + i +"' name='" + tab[i] + "'> <label for='" + tab[i] + "'> " + tab[i].type[1] + " ----> from " + tab[i].issuer.split('.')[0].substring(8) + "</label> </div>");
    }
      
  </script>

	<button class="styled" type="button" id="makeVP">
       Send credentials
  </button>

























  <script type="text/javascript">
	function initElement()
	{
	  var p = document.getElementById("makeVP");
	  // NOTE: showAlert(); ou showAlert(param); NE fonctionne PAS ici.
	  // Il faut fournir une valeur de type function (nom de fonction déclaré ailleurs ou declaration en ligne de fonction).
	  p.onclick = showAlert;
	};

	function showAlert()
	{
		var checkboxes = document.getElementsByClassName('vcAvailable');
		var vals = [];
		for (var i=0, n=checkboxes.length;i<n;i++) 
		{
		    if (checkboxes[i].checked) 
		    {
		        vals.push(checkboxes[i].id);
		    }
		}
		document.write("<div> " + vals  + " </div>");
	}

	initElement();
  </script>

  </body>
</html>